<!DOCTYPE html>
<html>

<head>
  <title>Skylink Chat</title>
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <script src="//code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.0/angular.min.js" type="text/javascript"></script>
  <script src="../../publish/skylink.complete.js" type="text/javascript"></script>
  <script src="js/script.js" type="text/javascript"></script>
</head>

<body ng-app="Skylink" ng-controller="RoomController as ctrl">
	<!-- !! navigation -->
  <nav class="navbar navbar-default navbar-static-top" role="navigation">
   <div class="container-fluid container-wrapper">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#top-navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <!-- logo -->
        <a href="#"> <span class="navbar-brand">Chat Demo with Skylink</span> </a>
      </div>

      <div id="top-navbar" class="collapse navbar-collapse navbar-right">
        <ul class="nav navbar-nav">
        	<!-- navigation items -->
          <li class="{{ctrl.activePages.lobby}}" ng-show="ctrl.inLobby"> <a href="##lobby"> <i class="fa fa-list"></i>Lobby Overview</a> </li>
          <li class="{{ctrl.activePages.profile}}" ng-show="ctrl.inLobby"> <a href="##profile"> <i class="fa fa-user"></i>My Profile </a> </li>
          <li class="" ng-show="ctrl.inLobby" ng-click="ctrl.leaveRoom()"> <a href="##logout"> <i class="fa fa-sign-out"></i>Exit Network</a> </li>
          <li class="active" ng-hide="ctrl.inLobby"> <a href="##login"> <i class="fa fa-sign-in"></i>Connect to Network </a> </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- !! view -->
  <div class="page container-wrapper container-fluid">
  	<!-- !!! section: login -->
  	<section id="login-panel" class="container container-fixed" ng-hide="ctrl.inLobby || ctrl.inRoom">
  		<div class="panel panel-default">
			  <div class="panel-body">
			    <h3>
			    	<i class="fa fa-globe"></i>
			    	Connect to Network
			    	<small>Join with other peers to a lobby</small>
			    </h3>
			    <hr>
			    <div class="form-group">
			    	<input ng-model="ctrl.apiKey" class="form-control" type="text" placeholder="Lobby API Key">
			    </div>
			    <div class="form-group">
			    	<input ng-model="ctrl.username" class="form-control" type="text" placeholder="Your Name">
			    </div>
			    <button class="btn btn-default" type="button" ng-click="ctrl.joinLobby()">
			    	<i class="fa fa-arrow-right"></i>
			    	Connect to server
			    </button>
			  </div>
			</div>
		</section>

		<!-- !!! section: lobby -->
		<section id="lobby-panel" ng-show="ctrl.inLobby && ctrl.activePages.lobby">
			<div class="col-md-8">
				<div class="panel panel-default chat-panel-wrapper">
					<div class="panel-heading">{{ ctrl.currentChat || 'Group' }}</div>
				  <div class="panel-body chat-panel">
				    <div class="media" ng-repeat="message in ctrl.chats[ctrl.currentChat || 'lobby']">
				      <a class="media-left">
				        <img data-src="holder.js/64x64" alt="64x64" src="img/default.png" data-holder-rendered="true">
				      </a>
				      <div class="media-body">
				        <span class="media-heading">{{message.username}}</span>
				        {{message.message}}
				      </div>
				    </div>
				  </div>
				  <div class="panel-footer">
				  	<div class="input-group">
				  		<span class="input-group-btn">
				        <button class="btn btn-default" type="button" ng-click="ctrl.sendData()">
				        	<i class="fa fa-paperclip"></i>
				        </button>
				      </span>
				      <input ng-model="ctrl.messageContent" type="text" class="form-control" ng-enter="ctrl.sendMessage()">
				      <span class="input-group-btn">
				        <button class="btn btn-default" type="button" ng-click="ctrl.sendMessage()">
				        	<i class="fa fa-arrow-right"></i>
				        </button>
				      </span>
				    </div>
				  </div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="list-group">
				  <a class="list-group-item {{ctrl.activeChats.lobby}}" href="##lobby">
				    <span class="badge" ng-show="ctrl.unreadChats.lobby > 0">{{ctrl.unreadChats.lobby}}</span>
				    <i class="fa fa-circle-o status-green"></i>Lobby
				  </a>
				  <a id="{{user.id}}" class="list-group-item {{ctrl.activeChats[user.id]}}" ng-repeat="user in ctrl.peers" href="##lobby!!{{user.id}}">
				    <span class="badge" ng-show="ctrl.unreadChats[user.id] > 0">{{ctrl.unreadChats[user.id]}}</span>
				    <i class="fa fa-circle status-red"></i>{{user.data.userData.username}}
				  </a>
				</ul>
			</div>
		</section>
  </div>
</body>

</html>
